# ConfiguraÃ§Ã£o do RepoGuardian AI
# Este arquivo define as regras de automaÃ§Ã£o para o repositÃ³rio

# Regras para Issues
issue_rules:
  # Regras de labels automÃ¡ticas
  - if_title_contains: ['bug', 'erro', 'falha', 'problema']
    then_add_label: 'bug'
    then_add_label: 'priority:high'
    then_add_to_project: 'Bug Tracking'
  
  - if_title_contains: ['feature', 'funcionalidade', 'novo', 'adicionar']
    then_add_label: 'enhancement'
    then_add_label: 'priority:medium'
    then_add_to_project: 'Feature Development'
  
  - if_title_contains: ['docs', 'documentaÃ§Ã£o', 'readme']
    then_add_label: 'documentation'
    then_add_label: 'priority:low'
  
  - if_title_contains: ['performance', 'otimizaÃ§Ã£o', 'lento']
    then_add_label: 'performance'
    then_add_label: 'priority:medium'
  
  - if_title_contains: ['security', 'seguranÃ§a', 'vulnerabilidade']
    then_add_label: 'security'
    then_add_label: 'priority:critical'

  # VerificaÃ§Ã£o de template
  - if_missing_template_sections: ['DescriÃ§Ã£o', 'Passos para reproduzir', 'Comportamento esperado']
    then_comment: |
      OlÃ¡! ğŸ‘‹
      
      Para garantir a clareza e agilizar a resoluÃ§Ã£o, esta Issue precisa seguir nosso template padrÃ£o.
      
      **Checklist para uma boa Issue:**
      - [ ] TÃ­tulo descritivo e claro
      - [ ] DescriÃ§Ã£o detalhada do problema/solicitaÃ§Ã£o
      - [ ] Passos para reproduzir (para bugs)
      - [ ] Comportamento esperado vs atual
      - [ ] Ambiente (navegador, SO, versÃ£o)
      
      Por favor, edite esta Issue para incluir as informaÃ§Ãµes em falta.
      
      *Labels adicionadas automaticamente pelo RepoGuardian AI* ğŸ¤–
    then_add_label: 'status:needs-info'

# Regras para Pull Requests
pr_rules:
  # VerificaÃ§Ã£o de Conventional Commits
  - if_title_not_matches: '^(feat|fix|docs|style|refactor|test|chore|perf|ci|build)(\(.+\))?: .+$'
    then_comment: |
      âš ï¸ **TÃ­tulo do PR nÃ£o segue o padrÃ£o Conventional Commits**
      
      Por favor, ajuste o tÃ­tulo para seguir o formato:
      `tipo(escopo): descriÃ§Ã£o`
      
      **Tipos vÃ¡lidos:**
      - `feat`: Nova funcionalidade
      - `fix`: CorreÃ§Ã£o de bug
      - `docs`: DocumentaÃ§Ã£o
      - `style`: FormataÃ§Ã£o/estilo
      - `refactor`: RefatoraÃ§Ã£o
      - `test`: Testes
      - `chore`: Tarefas de manutenÃ§Ã£o
      - `perf`: Melhorias de performance
      - `ci`: CI/CD
      - `build`: Build/dependÃªncias
      
      **Exemplo:** `feat(auth): adicionar autenticaÃ§Ã£o com Google`
    then_add_label: 'status:needs-review'
  
  # VerificaÃ§Ã£o de referÃªncia a Issue
  - if_description_not_contains: ['#', 'closes', 'fixes', 'resolves']
    then_comment: |
      ğŸ“‹ **ReferÃªncia a Issue**
      
      Este PR nÃ£o parece referenciar uma Issue relacionada.
      
      Por favor, adicione uma referÃªncia usando:
      - `Closes #123` - para fechar a Issue automaticamente
      - `Fixes #123` - para correÃ§Ãµes de bugs
      - `Resolves #123` - para resoluÃ§Ãµes gerais
      - `Related to #123` - para PRs relacionados
    then_add_label: 'status:needs-info'
  
  # VerificaÃ§Ã£o de tamanho do PR
  - if_changes_exceed: 500
    then_comment: |
      ğŸ“ **PR Grande Detectado**
      
      Este PR contÃ©m muitas alteraÃ§Ãµes (>500 linhas).
      
      **RecomendaÃ§Ãµes:**
      - Considere dividir em PRs menores
      - Adicione uma descriÃ§Ã£o detalhada das mudanÃ§as
      - Inclua testes adequados
      - Solicite revisÃ£o de mÃºltiplos desenvolvedores
    then_add_label: 'size:large'
    then_add_label: 'priority:high'
  
  # Auto-aprovaÃ§Ã£o para mudanÃ§as menores
  - if_changes_only: ['*.md', '*.txt', 'docs/**']
    and_if_author_is: ['dependabot', 'renovate']
    then_add_label: 'auto-merge'
    then_comment: |
      âœ… **Auto-aprovaÃ§Ã£o para documentaÃ§Ã£o**
      
      Este PR contÃ©m apenas alteraÃ§Ãµes em documentaÃ§Ã£o e foi criado por um bot confiÃ¡vel.
      SerÃ¡ mesclado automaticamente apÃ³s as verificaÃ§Ãµes de CI passarem.

# AutomaÃ§Ã£o de Releases
release_automation:
  # Trigger para criaÃ§Ã£o de release
  trigger_on_tag: 'v*.*.*'
  
  # CategorizaÃ§Ã£o do changelog
  categorize_by_labels:
    - title: 'ğŸš€ Novas Funcionalidades'
      labels: ['enhancement', 'feature']
      emoji: 'âœ¨'
    
    - title: 'ğŸ› CorreÃ§Ãµes de Bugs'
      labels: ['bug', 'fix']
      emoji: 'ğŸ”§'
    
    - title: 'ğŸ“š DocumentaÃ§Ã£o'
      labels: ['documentation', 'docs']
      emoji: 'ğŸ“–'
    
    - title: 'âš¡ Performance'
      labels: ['performance', 'perf']
      emoji: 'ğŸš€'
    
    - title: 'ğŸ”’ SeguranÃ§a'
      labels: ['security']
      emoji: 'ğŸ›¡ï¸'
    
    - title: 'ğŸ§¹ ManutenÃ§Ã£o'
      labels: ['chore', 'refactor']
      emoji: 'ğŸ”¨'
    
    - title: 'ğŸ§ª Testes'
      labels: ['test']
      emoji: 'âœ…'
    
    - title: 'ğŸ—ï¸ Build/CI'
      labels: ['ci', 'build']
      emoji: 'âš™ï¸'
  
  # ConfiguraÃ§Ãµes do release
  release_settings:
    draft: true
    prerelease: false
    generate_release_notes: true
    mention_maintainers: ['@felixskmarcio']
    include_contributors: true

# ConfiguraÃ§Ãµes de notificaÃ§Ã£o
notifications:
  # Canais de notificaÃ§Ã£o
  channels:
    slack:
      webhook_url: '${SLACK_WEBHOOK_URL}'
      channel: '#dev-notifications'
    
    discord:
      webhook_url: '${DISCORD_WEBHOOK_URL}'
  
  # Eventos para notificar
  events:
    - 'issue_opened'
    - 'pr_opened'
    - 'pr_merged'
    - 'release_published'
    - 'security_alert'

# ConfiguraÃ§Ãµes de qualidade
quality_gates:
  # VerificaÃ§Ãµes obrigatÃ³rias
  required_checks:
    - 'ci/build'
    - 'ci/test'
    - 'ci/lint'
    - 'security/scan'
  
  # Cobertura de testes mÃ­nima
  min_test_coverage: 80
  
  # VerificaÃ§Ãµes de seguranÃ§a
  security_checks:
    - 'dependency_scan'
    - 'code_scan'
    - 'secret_scan'

# ConfiguraÃ§Ãµes de automaÃ§Ã£o
automation:
  # Auto-merge para dependabot
  auto_merge:
    enabled: true
    conditions:
      - author: 'dependabot[bot]'
      - checks_passed: true
      - labels_include: ['dependencies']
      - changes_only: ['package.json', 'package-lock.json', 'yarn.lock']
  
  # Stale issues/PRs
  stale_management:
    enabled: true
    days_until_stale: 30
    days_until_close: 7
    stale_label: 'stale'
    exempt_labels: ['pinned', 'security', 'priority:critical']
    stale_comment: |
      Esta Issue/PR estÃ¡ inativa hÃ¡ 30 dias e serÃ¡ fechada em 7 dias se nÃ£o houver atividade.
      
      Se ainda for relevante, por favor comente ou atualize para manter aberta.

# ConfiguraÃ§Ãµes de mÃ©tricas
metrics:
  # MÃ©tricas a serem coletadas
  collect:
    - 'issue_resolution_time'
    - 'pr_merge_time'
    - 'code_review_time'
    - 'release_frequency'
    - 'bug_rate'
    - 'test_coverage'
  
  # RelatÃ³rios automÃ¡ticos
  reports:
    weekly:
      enabled: true
      day: 'monday'
      recipients: ['@felixskmarcio']
    
    monthly:
      enabled: true
      day: 1
      include_charts: true

# ConfiguraÃ§Ãµes de seguranÃ§a
security:
  # VerificaÃ§Ãµes automÃ¡ticas
  auto_security_updates: true
  
  # Alertas de seguranÃ§a
  security_alerts:
    enabled: true
    severity_threshold: 'medium'
    auto_create_issues: true
  
  # VerificaÃ§Ã£o de secrets
  secret_scanning:
    enabled: true
    patterns:
      - 'api_key'
      - 'secret_key'
      - 'password'
      - 'token'
      - 'private_key'